<polymer-element name="toc">

  <template>
    <nav role="navigation" class="table-of-contents">
      <h2>Table of contents</h2>
      <ul id="tocList"></ul>
    </nav>

    <style>
      .table-of-contents {
        float: right;
        width: 40%;
        background: #eee;
        font-size: 0.8em;
        padding: 1em 2em;
        margin: 0 0 0.5em 1.5em;
      }
      .table-of-contents ul {
        padding: 0;
      }
      .table-of-contents li {
        margin: 0 0 0.25em 0;
      }
      .table-of-contents a {
        font-size: 1.2em;
        text-decoration: none;
      }
      .table-of-contents a:hover,
      .table-of-contents a:active {
        text-decoration: underline;
      }
    </style>
  </template>

  <script>
    Polymer('toc', {
      ready: function() {
        var tocHTML  = '';
        var headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');

        for (var i = 0; i < headings.length; i++) {
          if (headings[i].id) {
            title   = headings[i].textContent;
            link    = headings[i].id;
            item    = '<li><a href="#' + link + '">' + title + '</a></li>';
            tocHTML += item;
          }
        }

        this.$.tocList.innerHTML = tocHTML;
      }
    });
  </script>

</polymer-element>
